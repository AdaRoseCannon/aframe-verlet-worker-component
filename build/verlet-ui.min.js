!function(t){function e(r){if(i[r])return i[r].exports;var n=i[r]={exports:{},id:r,loaded:!1};return t[r].call(n.exports,n,n.exports,e),n.loaded=!0,n.exports}var i={};return e.m=t,e.c=i,e.p="",e(0)}([function(t,e,i){"use strict";i(10),i(14),i(15),i(16),i(11)},,,,,,,,,,function(t,e,i){"use strict";var r=i(11).template,n={radio:i(12),button:i(13)};AFRAME.registerComponent("verlet-ui-input",AFRAME.utils.extend({schema:{type:{type:"string"}},setup:function(){return this.remove(),this.remove=n[this.data.type].remove,n[this.data.type].setup.bind(this)()}},r)),AFRAME.registerComponent("verlet-ui-default-selector",{schema:{color:{type:"color",default:"#ffffff"},activeColor:{type:"color",default:"#ff9911"}},init:function(){this.els=[]},update:function(){this.el.setAttribute("material","color",this.data.color),this.remove();var t=document.createElement("a-animation");t.setAttribute("attribute","scale"),t.setAttribute("easing","ease-out-elastic"),t.setAttribute("begin","grabber-hover-on"),t.setAttribute("fill","forwards"),t.setAttribute("dur","1000"),t.setAttribute("to","1.3 1.3 1.3");var e=document.createElement("a-animation");e.setAttribute("attribute","scale"),e.setAttribute("easing","ease-out-elastic"),e.setAttribute("begin","grabber-hover-out"),e.setAttribute("fill","forwards"),e.setAttribute("dur","1000"),e.setAttribute("to","1 1 1");var i=document.createElement("a-animation");i.setAttribute("attribute","material.color"),i.setAttribute("begin","grabber-drag-start"),i.setAttribute("fill","forwards"),i.setAttribute("dur","200"),i.setAttribute("from",this.data.color),i.setAttribute("to",this.data.activeColor);var r=document.createElement("a-animation");r.setAttribute("attribute","material.color"),r.setAttribute("begin","grabber-drag-end"),r.setAttribute("fill","forwards"),r.setAttribute("dur","200"),r.setAttribute("from",this.data.activeColor),r.setAttribute("to",this.data.color),this.el.appendChild(t),this.el.appendChild(e),this.el.appendChild(i),this.el.appendChild(r),this.els.push(t,e,i,r)},remove:function(){for(;this.els.length;)this.el.removeChild(this.els.pop())}}),AFRAME.registerComponent("verlet-ui-default-button",{schema:{color:{type:"color",default:"#ffffff"},activeColor:{type:"color",default:"#ff9911"}},init:function(){this.els=[]},update:function(){this.el.setAttribute("material","color",this.data.color),this.remove();var t=document.createElement("a-animation");t.setAttribute("attribute","scale"),t.setAttribute("easing","ease-out-elastic"),t.setAttribute("begin","grabber-hover-on"),t.setAttribute("fill","forwards"),t.setAttribute("dur","1000"),t.setAttribute("to","1.3 1.3 1.3");var e=document.createElement("a-animation");e.setAttribute("attribute","scale"),e.setAttribute("easing","ease-out-elastic"),e.setAttribute("begin","grabber-hover-out"),e.setAttribute("fill","forwards"),e.setAttribute("dur","1000"),e.setAttribute("to","1 1 1");var i=document.createElement("a-animation");i.setAttribute("attribute","material.color"),i.setAttribute("begin","grabber-click"),i.setAttribute("fill","forwards"),i.setAttribute("dur","200"),i.setAttribute("from",this.data.activeColor),i.setAttribute("to",this.data.color),this.el.appendChild(t),this.el.appendChild(e),this.el.appendChild(i),this.els.push(t,e,i)},remove:function(){for(;this.els.length;)this.el.removeChild(this.els.pop())}})},function(t,e){"use strict";AFRAME.registerPrimitive("verlet-ui",{defaultComponents:{"grabber-tracking":{},"verlet-container":{gravity:0,friction:.8}},mappings:{manipulator:"grabber-tracking.manipulator",pointer:"grabber-tracking.pointer"}});var i=function(){},r={update:function(){this.tick===i&&(this.tick=this.__tick)},tick:function(){for(var t=this.el;t&&t.matches&&!t.matches("[grabber-tracking], verlet-ui");)t=t.parentNode;this.parent=t,this.__tick=this.tick,this.tick=i,this.setup()}};t.exports.template=r},function(t,e){"use strict";t.exports.setup=function(){this.constraints=this.constraints||[],this.eventListeners=this.eventListeners||[],this.remove();var t=this.el.querySelector("a-verlet-ui-input-selector"),e=this.parent.getDOMAttribute("grabber-tracking").manipulator,i=this,r=[].slice.call(document.querySelectorAll("a-verlet-ui-option"));this.updateValue=function(){r.sort(function(e,i){var r=t.object3D.position.distanceToSquared(e.object3D.position),n=t.object3D.position.distanceToSquared(i.object3D.position);return r-n}),this.el.value=r[0].getAttribute("value")},this.setConstraint=function(){this.setAttribute("verlet-constraint","stiffness: 0.4; to: "+e+";")},this.removeConstraint=function(){this.setAttribute("verlet-constraint","stiffness: 0.4; to:;")},t.addEventListener("grabber-drag-start",this.setConstraint),t.addEventListener("grabber-drag-end",this.removeConstraint),this.updateValue(),t.addEventListener("grabber-drag-end",function(){var t=i.el.value;i.updateValue(),i.el.value!==t&&i.el.emit("change",i.el.value)}),r.forEach(function(e){i.parent.components["verlet-container"].connectPoints(e,t,{stiffness:.5,range:.75,restingDistance:0}).then(function(t){e.__constraintId=t.constraintId,i.constraints.push(t.constraintId)})})},t.exports.remove=function(){var t=this;this.constraints.forEach(function(e){return t.parent.components["verlet-container"].removeConstraint(e)});var e=this.el.querySelector("a-verlet-ui-input-selector");e.removeEventListener("grabber-drag-start",this.setConstraint),e.removeEventListener("grabber-drag-end",this.removeConstraint)}},function(t,e){"use strict";t.exports.setup=function(){this.el.getAttribute("verlet-ui-grabable")||this.el.setAttribute("verlet-ui-grabable",""),this.el.setAttribute("verlet-point","mass: 0;"),this.el.addEventListener("grabber-click",function(){this.emit("click")})},t.exports.remove=function(){}},function(t,e,i){"use strict";function r(t,e){if(!e)return function(e){return r(t,e)};var i=t.object3D.position.distanceToSquared(e.components["verlet-point"].worldPosition||e.object3D.position);return t.components["verlet-constraint"]&&t.components["verlet-constraint"].data.restingDistance&&(i-=t.components["verlet-constraint"].data.restingDistance*t.components["verlet-constraint"].data.restingDistance),e.components["verlet-constraint"]&&e.components["verlet-constraint"].data.restingDistance&&(i-=e.components["verlet-constraint"].data.restingDistance*e.components["verlet-constraint"].data.restingDistance),i<0&&(i=0),i}var n=i(11).template;AFRAME.registerComponent("verlet-ui-pointer",AFRAME.utils.extend({setup:function(){var t=this.parent.getDOMAttribute("grabber-tracking").manipulator;this.el.setAttribute("verlet-constraint","stiffness: 0.05; to: "+t+";")}},n)),AFRAME.registerComponent("verlet-ui-default-pointer",{init:function(){var t=document.createElement("a-entity");t.setAttribute("material","color: white;"),t.setAttribute("scale","0.2 0.2 0.2"),t.setAttribute("rotation","30 0 0"),t.setAttribute("obj-model","obj: url(https://cdn.rawgit.com/SamsungInternet/a-frame-demos/44b878/a-frame-assets/hand/hand-relaxed.obj);");var e=document.createElement("a-entity");e.setAttribute("material","color: white;"),e.setAttribute("scale","0.2 0.2 0.2"),e.setAttribute("rotation","40 0 0"),e.setAttribute("obj-model","obj: url(https://cdn.rawgit.com/SamsungInternet/a-frame-demos/44b878/a-frame-assets/hand/hand-fist.obj);"),e.setAttribute("visible","false");var i=this.el;i.appendChild(t),i.appendChild(e),i.addEventListener("grabber-drag-start",function(){t.setAttribute("visible",!1),e.setAttribute("visible",!0)}),i.addEventListener("grabber-drag-end",function(){t.setAttribute("visible",!0),e.setAttribute("visible",!1)}),this.el1=t,this.el2=e},remove:function(){this.el.removeChild(this.el1),this.el.removeChild(this.el2)}}),AFRAME.registerComponent("grabber-tracking",{schema:{manipulator:{type:"selector"},pointer:{type:"selector"}},init:function(){var t=this.el.sceneEl.canvas;return t?(t.addEventListener("touchstart",this.dragStart.bind(this)),t.addEventListener("touchend",this.dragEnd.bind(this)),t.addEventListener("mousedown",this.dragStart.bind(this)),t.addEventListener("mouseup",this.dragEnd.bind(this)),t.addEventListener("click",this.handleClick.bind(this)),this.actionables=[],this.currentObject=null,void(this.ready===!0)):void this.el.sceneEl.addEventListener("render-target-loaded",this.init.bind(this))},update:function(){this.grabber=this.data.pointer,this.cameraAnchor=this.data.manipulator,this.squaredDistanceFn=r(this.grabber),this.sortFn=function(t,e){return this.squaredDistanceFn(t)-this.squaredDistanceFn(e)}.bind(this)},registerActionable:function(t){this.actionables.indexOf(t)===-1&&this.actionables.push(t)},unRegisterActionable:function(t){var e=this.actionables.indexOf(t);e!==-1&&this.actionables.splice(e,1)},handleClick:function(){this.grabber.emit("grabber-click"),null!==this.currentObject&&this.currentObject.emit("grabber-click")},dragStart:function(t){this.grabber.emit("grabber-drag-start"),null!==this.currentObject&&(this.grabEl=this.currentObject,this.currentObject.emit("grabber-drag-start"),t.preventDefault())},dragEnd:function(t){this.grabber.emit("grabber-drag-end"),this.grabEl&&(this.grabEl.emit("grabber-drag-end"),this.grabEl=null,t.preventDefault())},tick:function(){this.actionables.sort(this.sortFn);var t=this.actionables[0];if(this.squaredDistanceFn(t)<.5){if(this.currentObject===t)return;null!==this.currentObject&&this.currentObject.emit("grabber-hover-out"),this.currentObject=t,t.emit("grabber-hover-on")}else this.currentObject&&(this.currentObject.emit("grabber-hover-out"),this.currentObject=null)}}),AFRAME.registerComponent("verlet-ui-grabable",AFRAME.utils.extend({schema:{range:{default:.8},radius:{default:0}},setup:function(){this.remove();var t=this.parent.getAttribute("grabber-tracking").pointer;this.parent.components["grabber-tracking"].registerActionable(this.el),this.constraintIdPromise=this.parent.components["verlet-container"].connectPoints(this.el,t,{stiffness:.2,range:this.data.range,restingDistance:this.data.radius}).then(function(t){return t.constraintId})},remove:function(){var t=this;this.parent.components["grabber-tracking"].unRegisterActionable(this.el),this.constraintIdPromise&&this.constraintIdPromise.then(function(e){return t.parent.components["verlet-container"].removeConstraint(e)})}},n))},function(t,e){"use strict";AFRAME.registerPrimitive("verlet-ui-pointer",{defaultComponents:{"verlet-ui-pointer":{},"verlet-point":{mass:.1}}}),AFRAME.registerPrimitive("a-verlet-ui-input",{defaultComponents:{"verlet-ui-input":{}},mappings:{type:"verlet-ui-input.type"}}),AFRAME.registerPrimitive("a-verlet-ui-option",{defaultComponents:{geometry:{primitive:"sphere",radius:"0.2"},material:{shader:"standard"},"verlet-point":{mass:0}},mappings:{radius:"geometry.radius",color:"material.color"}}),AFRAME.registerPrimitive("a-verlet-ui-input-selector",{defaultComponents:{geometry:{primitive:"sphere",radius:"0.3"},"verlet-ui-grabable":{radius:.3},material:{shader:"standard",side:"back",transparent:!0,opacity:.8},"verlet-point":{mass:1}},mappings:{type:"verlet-ui-input.type",radius:"geometry.radius",color:"material.color",default:"position-from-el"}})},function(t,e){"use strict";AFRAME.registerComponent("position-from-el",{schema:{type:"selector"},update:function(){this.data&&this.el.setAttribute("position",this.data.getAttribute("position"))}})}]);